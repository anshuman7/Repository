<!DOCTYPE html>
<html>

<head>

  <meta charset="UTF-8"> 

  <title>Anshuman | Text Editor</title>

  <link rel='stylesheet prefetch' href='http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css'>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  <script src='sizzle.min.js'></script>
  <link rel="stylesheet" type="text/css" href="style.css">

</head>

<body>
  <div>
  <div>
    <div id='buttons'>
      <h1>Text Editor</h1>
      <div>
        <a data-role='bold' href='#'><i class='fa fa-bold'></i></a>
        <a data-role='italic' href='#'><i class='fa fa-italic'></i></a>
        <a data-role='justifyLeft' href='#'><i class='fa fa-align-left'></i></a>
        <a data-role='justifyCenter' href='#'><i class='fa fa-align-center'></i></a>
        <a data-role='justifyRight' href='#'><i class='fa fa-align-right'></i></a>
        <a data-role='justifyFull' href='#'><i class='fa fa-align-justify'></i></a>
      </div>
    </div>
    <div id='textEditor' contenteditable="true" class="on" >
       This is content editable..Enter text here...
    </div>
  </div>
</div>

  <script>

  //to allow only plaintext.
 $('.on[contenteditable]').on('paste', function (e) {
    e.preventDefault();
    var text = (e.originalEvent || e).clipboardData.getData('text/plain');
    var text1 = (e.originalEvent || e).clipboardData.getData('text/html');
    if(text1 == ""){ 
      document.execCommand('insertText', false, text); 
    }
    else { var $result = $('<div></div>').append(text1);
    document.execCommand('insertHTML', false, $result.html() );

            // replace all styles except bold and italic
            $.each($(this).find("*"), function(idx, val) {

                var $item = $(val);
                if ($item.length > 0){
                   var saveStyle = {
                        'font-weight': $item.css('font-weight'),
                        'font-style': $item.css('font-style')
                    };
                    $item.removeAttr('style')
                         .removeClass()
                         .css(saveStyle); 
                
              
                    $item.removeAttr('href').removeClass();
                    $item.removeAttr('link').removeClass();
                    $item.removeAttr('a').removeClass();
                    $item.removeAttr('src').removeClass();
                    $item.removeAttr('img').removeClass();
            }
                  //  remove unnecesary tags
            $(this).children('style').remove();
            $(this).children('meta').remove()
            $(this).children('link').remove();
            });
          }
});

//to select only the highlighted part of the div and apply the button on it
$('#buttons a').click(function(e) {
      e.preventDefault();
      document.execCommand($(this).data('role'), false, null);

})
  </script>


</body>

</html>
 
